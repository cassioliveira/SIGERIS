<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	template="/WEB-INF/templates/Layout.xhtml">

	<f:metadata>
		<f:viewParam name="reuniao" value="#{reuniaoBean.reuniao}" />
	</f:metadata>

	<ui:define name="content">

		<p:fieldset id="fieldsetRelatorio" legend="Emissão de relatórios">

			<p:messages id="msgs" closable="true" severity="info,warn,error">
				<p:autoUpdate />
			</p:messages>

			<h:form id="formCadastroRelatorio">

				<p:panel id="listaFrequencia" header="Lista de presença">

					<h:panelGrid id="panelCadastroRelatorio" columns="2">

						<p:outputLabel for="data" value="Data: " />
						<p:calendar id="data" navigator="true" pattern="dd/MM/yyyy"
							yearRange="c-100:c+100" showOn="button" maxlength="10"
							mask="true" size="21" locale="pt"
							value="#{reuniaoBean.reuniao.data}">
							<f:convertDateTime type="date" pattern="dd/MM/yyyy"
								locale="pt_BR" />
							<p:tooltip for="data"
								value="Informe a data em que ocorrerá a atividade" />
						</p:calendar>

						<p:outputLabel for="hora" value="Hora: " />
						<p:calendar id="hora" navigator="false" pattern="HH:mm"
							timeOnly="true" maxlength="10" mask="true" size="26" locale="pt"
							value="#{reuniaoBean.reuniao.hora}">
							<f:convertDateTime type="time" pattern="HH:mm" locale="pt_BR" />
							<p:tooltip for="hora"
								value="Informe a hora em que ocorrerá a atividade" />
						</p:calendar>

						<p:outputLabel for="setor" value="Setor: " />
						<p:selectOneMenu id="setor" value="#{reuniaoBean.reuniao.setor}"
							style="width: 373px">
							<f:selectItem noSelectionOption="true" />
							<f:selectItems var="setor" value="#{setorBean.setores}"
								itemLabel="#{setor.nome}" itemValue="#{setor}" />
						</p:selectOneMenu>

						<p:outputLabel for="listaServidores" value="Servidores: " />
						<p:selectCheckboxMenu id="listaServidores"
							value="#{reuniaoBean.reuniao.servidores}" style="width: 402px"
							filter="true" filterMatchMode="contains">
							<f:selectItems var="servidor" value="#{reuniaoBean.servidores}"
								itemLabel="#{servidor.nome}" itemValue="#{servidor}" />
						</p:selectCheckboxMenu>

						<p:outputLabel for="atividade" value="Atividade: " />
						<p:inputText id="atividade"
							value="#{reuniaoBean.reuniao.atividade}" size="47" maxlength="20">
							<p:tooltip for="atividade"
								value="Informe a atividade a ser realizada" />
						</p:inputText>

						<p:outputLabel for="local" value="Local: " />
						<p:inputText id="local" value="#{reuniaoBean.reuniao.local}"
							size="47" maxlength="200">
							<p:tooltip for="local"
								value="Informe o local onde ocorrerá a atividade" />
						</p:inputText>

						<p:outputLabel for="pauta" value="Pauta: " />
						<p:editor
							controls="bold italic underline size color highlight numbering bullets alignleft center alignright justify undo redo"
							id="pauta" width="400" height="150"
							value="#{reuniaoBean.reuniao.pauta}" />

					</h:panelGrid>

					<p:toolbar style="margin-top: 10px">
						<f:facet name="left">
							<p:commandButton id="pdfListaFrequencia"
								action="#{reuniaoBean.listaReunioes}" immediate="true"
								ajax="false" icon="fa fa-file-pdf-o" value="Emitir lista"
								onclick="this.form.target = '_blank'"
								disabled="#{pessoaBean.servidores.size() == 0}" />


							<p:commandButton id="teste" action="#{reuniaoBean.dados}"
								immediate="true" ajax="false" icon="fa fa-file-pdf-o"
								value="Teste" />
						</f:facet>
					</p:toolbar>

				</p:panel>

				<div class="ui-g">
					<div class="ui-g-6">
						<p:panel id="servidores" header="Servidores">

							<p:commandButton id="pdfServidores"
								action="#{executaRelatorios.servidores('SERVIDORES')}"
								immediate="true" ajax="false" icon="fa fa-file-pdf-o"
								value="Servidores" onclick="this.form.target = '_blank'"
								disabled="#{pessoaBean.servidores.size() == 0}" />
						</p:panel>
					</div>
					<div class="ui-g-6">
						<p:panel id="tecnicos" header="Técnicos">
							<p:commandButton id="pdfTecnicos"
								action="#{executaRelatorios.servidores('TECNICOS')}"
								immediate="true" ajax="false" icon="fa fa-file-pdf-o"
								value="Técnicos" onclick="this.form.target = '_blank'"
								disabled="#{pessoaBean.servidores.size() == 0}" />
						</p:panel>
					</div>

				</div>

				<div class="ui-g">
					<div class="ui-g-6">
						<p:panel id="professores" header="Professores">
							<p:commandButton id="pdfProfessores"
								action="#{executaRelatorios.servidores('PROFESSORES')}"
								immediate="true" ajax="false" icon="fa fa-file-pdf-o"
								value="Professores" onclick="this.form.target = '_blank'"
								disabled="#{pessoaBean.servidores.size() == 0}" />
						</p:panel>
					</div>
				</div>
			</h:form>

		</p:fieldset>

	</ui:define>

</ui:composition>
